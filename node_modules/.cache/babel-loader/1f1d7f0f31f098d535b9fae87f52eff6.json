{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\Desktop\\\\soen341\\\\SOEN-341-reactbranchpay\\\\src\\\\Orders.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport './Orders.css';\nimport { useStateValue } from \"./StateProvider\";\nimport { db } from './firebase';\nimport CheckoutProduct from \"./CheckoutProduct.js\";\nimport CurrencyFormat from \"react-currency-format\";\nimport moment from \"moment\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Order(_ref) {\n  var _order$data$basket;\n\n  let {\n    order\n  } = _ref;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"order\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Order\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: moment.unix(order.data.created).format(\"MMMM Do YYYY, h:mma\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      class: \"order_id\",\n      children: [\"Order ID : \", order.id]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 11\n    }, this), (_order$data$basket = order.data.basket) === null || _order$data$basket === void 0 ? void 0 : _order$data$basket.map(item => /*#__PURE__*/_jsxDEV(CheckoutProduct, {\n      id: item.id,\n      title: item.title,\n      image: item.image,\n      price: item.price,\n      rating: item.rating,\n      hideButton: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 17\n    }, this)), /*#__PURE__*/_jsxDEV(CurrencyFormat, {\n      renderText: value => /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"order_total\",\n        children: [\"Order Total: \", value]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 21\n      }, this),\n      decimalScale: 2,\n      value: order.data.amount / 100,\n      displayType: \"text\",\n      thousandSeparator: true,\n      prefix: \"$\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 7\n  }, this);\n}\n\n_c = Order;\n\nfunction Order_History() {\n  _s();\n\n  const [orders, setOrders] = useState([]);\n  const [{\n    basket,\n    user\n  }, dispatch] = useStateValue();\n  useEffect(() => {\n    if (user) {\n      db.collection('users').doc(user === null || user === void 0 ? void 0 : user.uid).collection('orders').orderBy('created', 'desc').onSnapshot(snapshot => setOrders(snapshot.docs.map(doc => ({\n        //this stores in an array\n        id: doc.id,\n        //this stores in a data key\n        data: doc.data()\n      }))));\n    } else {\n      setOrders([]);\n    }\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"orders\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Your Orders\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"orders_order\",\n      children: orders === null || orders === void 0 ? void 0 : orders.map(order => /*#__PURE__*/_jsxDEV(Order, {\n        order: order\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Order_History, \"Ibp2F5ybI1JgJUc4+BURyPkd/8Y=\", false, function () {\n  return [useStateValue];\n});\n\n_c2 = Order_History;\nexport default Order_History;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Order\");\n$RefreshReg$(_c2, \"Order_History\");","map":{"version":3,"sources":["C:/Users/admin/Desktop/soen341/SOEN-341-reactbranchpay/src/Orders.js"],"names":["React","useState","useEffect","useStateValue","db","CheckoutProduct","CurrencyFormat","moment","Order","order","unix","data","created","format","id","basket","map","item","title","image","price","rating","value","amount","Order_History","orders","setOrders","user","dispatch","collection","doc","uid","orderBy","onSnapshot","snapshot","docs"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';import './Orders.css';\nimport { useStateValue } from \"./StateProvider\";\nimport { db } from './firebase';\nimport CheckoutProduct from \"./CheckoutProduct.js\";\nimport CurrencyFormat from \"react-currency-format\";\nimport moment from \"moment\";\n\nfunction Order({ order }) {\n  return (\n      <div class=\"order\">\n          <h2>Order</h2>\n          <p>{moment.unix(order.data.created).format(\"MMMM Do YYYY, h:mma\")}</p>\n          <p class=\"order_id\">\n              Order ID : {order.id}\n              </p>\n              {order.data.basket?.map(item => (\n                <CheckoutProduct\n                    id={item.id}\n                    title={item.title}\n                    image={item.image}\n                    price={item.price}\n                    rating={item.rating}\n                    hideButton\n                />\n            ))}\n            <CurrencyFormat\n                renderText={(value) => (\n                    <h3 className=\"order_total\">Order Total: {value}</h3>\n                )}\n                decimalScale={2}\n                value={order.data.amount / 100}\n                displayType={\"text\"}\n                thousandSeparator={true}\n                prefix={\"$\"}/>   \n        </div>\n    \n  )\n}\n\nfunction Order_History() {\n    const [orders, setOrders] = useState([]);\n    const [{ basket, user }, dispatch] = useStateValue();    \n    useEffect(()=>{\n        if(user){\n            db\n            .collection('users')\n            .doc(user?.uid)\n            .collection('orders')\n            .orderBy('created','desc')\n            .onSnapshot(snapshot => (\n                setOrders(snapshot.docs.map(doc=>({\n                    //this stores in an array\n                    id: doc.id,\n                    //this stores in a data key\n                    data: doc.data()\n                }))))\n            )}\n        else{\n                setOrders([])\n            }\n    },[user]) \n\n\n    \n        return (\n    <div className=\"orders\">\n        <h1>Your Orders</h1>\n        <div className='orders_order'>\n                {orders?.map(order => (\n                    <Order order={order} />\n                ))}\n            </div>\n        </div>\n  )\n}\n\nexport default Order_History"]},"metadata":{},"sourceType":"module"}